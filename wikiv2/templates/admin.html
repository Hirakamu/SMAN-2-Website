<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel - Wiki Plus</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="header">Admin Panel</div>
    <div class="nav">
        <a href="{{ url_for('index') }}">Artikel</a>
        <a href="{{ url_for('landing') }}">Home</a>
        <a href="{{ url_for('logout') }}">Logout</a>
    </div>
    <div style="max-width:700px;margin:2em auto;background:#fffbe6;border-radius:16px;box-shadow:0 2px 8px #eab30833;padding:2em;">
        <h2 style="color:#eab308;font-size:2em;margin-bottom:1em;">🛡️ Moderation Tools</h2>
        <ul class="news-list">
        {% for page in pages %}
                <li style="display:flex;align-items:center;justify-content:space-between;gap:1em;">
                    <span class="news-title" style="flex:1;">{{ page.title }}</span>
                    <span class="news-meta" style="min-width:110px;text-align:right;color:#888;">{{ page.date }}</span>
                    <form method="post" action="{{ url_for('admin') }}" style="display:inline;">
                        <input type="hidden" name="page" value="{{ page.title }}">
                        <button type="submit" name="lock" class="create-btn {% if locked_pages and page.title in locked_pages %}locked-btn{% else %}unlocked-btn{% endif %}" style="min-width:90px;font-weight:bold;box-shadow:0 2px 8px #eab30833;">
                            {% if locked_pages and page.title in locked_pages %}Unlock{% else %}Lock{% endif %}
                        </button>
                    </form>
                </li>
        {% else %}
            <li>No pages yet.</li>
        {% endfor %}
        </ul>
        <p style="font-size:0.95em;color:#888;margin-top:1em;">Locking a page prevents public editing. Unlock to allow edits.</p>
    </div>

    <div style="max-width:700px;margin:2em auto;background:#fffbe6;border-radius:16px;box-shadow:0 2px 8px #ef444433;padding:2em;margin-top:2em;">
        <h2 style="color:#ef4444;font-size:1.5em;margin-bottom:1em;">🗑️ Trashed Pages</h2>
        <ul class="news-list">
        {% for page in trashed %}
            <li style="display:flex;align-items:center;justify-content:space-between;gap:1em;">
                <span class="news-title" style="flex:1;color:#ef4444;">{{ page.title }}</span>
                <span class="news-meta" style="min-width:110px;text-align:right;color:#888;">{{ page.date }}</span>
                <form method="post" action="{{ url_for('admin') }}" style="display:inline;">
                    <input type="hidden" name="restore" value="{{ page.title }}">
                    <button type="submit" class="create-btn unlocked-btn" style="min-width:90px;font-weight:bold;box-shadow:0 2px 8px #22d3ee33;">Restore</button>
                </form>
                <form method="post" action="{{ url_for('admin') }}" style="display:inline;">
                    <input type="hidden" name="delete_permanent" value="{{ page.title }}">
                    <button type="submit" class="create-btn locked-btn" style="min-width:90px;font-weight:bold;box-shadow:0 2px 8px #ef444433;">Delete Permanently</button>
                </form>
            </li>
        {% else %}
            <li>No trashed pages.</li>
        {% endfor %}
        </ul>
        <p style="font-size:0.95em;color:#888;margin-top:1em;">Restored pages return to the wiki.</p>
    </div>
    <div class="footer">
        &copy; 2025 SMAN-2 Wiki Plus
    </div>
</body>
</html>
